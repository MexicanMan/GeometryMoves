# Geometry Moves

Из трудностей и улучшений, которые были проведены:

1. Если предположить, что могут загружаться очень большие файлы, то не очень хорошо их целиком сразу загружать в память. И в принципе не очень хорошо грузить подобные файлы сразу вместе с игрой. Поэтому: \
	**а.** Файлы лежат в StreamingAssets и подгружаются, когда нужно. \
	**б.** Чтобы не грузить сразу весь файл целиком - открывается его дескриптор и по необходимости читается нужная часть файла. \
	**в.** Так как на некоторых устройствах (Android и Web) StreamingAssets не доступны для чтения, не загружая их целиком в память, то на них дополнительно файл копируется в PersistentDataPath, где уже открывается его файловый дескриптор. \
	**г.** Так как каждый раз читать с диска не очень хорошо, реализовал подход со скользящим окном. При первом открытии в память читаются N строк (настраиваемая константа в зависимости от). Затем, когда необходимо прочитать значение вне окна - оно сдвигается в соответствующую сторону и читает с диска новые N строк. Для примера работоспособности в текущем проекте эта константа выставлена в 5 строк.
	**д.** Из еще небольшой сложности здесь было определить корректно определить длину строки, потому что `StreamReader.ReadLine()` удаляет символы конца строки. Поэтому пришлось считать ее отдельно через `FileStream.ReadByte()`.
	
2. Так как в проекте используется URP, то для смены цвета материала используется просто `material.color`. Хотя получается копия материала, но SRP батчер все равно обрабатывает их в одном батче.

3. Из еще небольшой сложности и чуть-чуть хака - решил выбирать стартовую рандомную точку не для центра, как это было в задании, а для верхнего левого угла сетки из кубов. В общем для логики и корректности выполнения задания кажется разницы никакой, но все вычисления упрощаются.
